
# 为什么要封装脚手架?
  - 减少重复的工作,不需要再从零创建一个项目,或者复制粘贴另一个项目代码.
  - 项目的结构和配置文件可动态变更,定制化的程度比较高
  - 有利于多人开发协作,避免手动复制粘贴和人工传输的不可靠和繁琐
  - 可以集成多套开发模板,根据项目的需求选择合适的模板
    - 是否集成ts? 选择react/vue? 选择哪个UI库? ...

## 脚手架的本质
  在开发过程中,第一步都是搭建项目. vue-cli和create-react-app等脚手架都是提供了快速搭建项目基础目录的功能,帮助开发者快速搭建项目.
  在一个稳定的开发团队中,技术选型及技术栈相当的稳定,每次开发如果从零开始搭建项目就比较繁琐,需要手动复制然后删删改改,容易出错.
  最好的方式就是团队内部自己开发一套脚手架,引入团队已经提炼好的项目模板,遇到新项目直接快速搭建即可.

  以Vue-cli2为例,它提供了很多命令选项和一些预置的工鞥呢,但是本质还是通过解析用户在终端中输入的命令,下载远程模板代码,然后通过替换关键信息来达到定制化/个性化的修改.

## 脚手架工作流程
  - 解析用户命令
    - commander:命令行工具,解析用户输入的命令.
    - 匹配失败:显示help信息
    - 匹配成功:进入下一步
  - 拉取远端模板
    - download-git-repo:通过git将远端的模板下载到本地
  - 根据用户输入替换默认内容
    - handlebars 模板
  - 文件操作渲染
    - 增删改 fs-extra
  - 结束初始化
    打印需要展示给用户的提示信息

## 依赖的工具库
  - 1 [commander](https://www.npmjs.com/package/commander)
    快速开发`Nodejs`命令行工具
  - 2 [chalk](https://www.npmjs.com/package/chalk)
    调用api修改terminal的颜色
  - 3 [download-git-repo](https://www.npmjs.com/package/download-git-repo)
    通过git下载对应的模板
  - 4 [ora](https://www.npmjs.com/package/ora)
    实现terminal中loading的效果
  - 5 [inquier](https://www.npmjs.com/package/inquirer)
    命令行中交互询问
  - 6 [metalsmith](https://www.npmjs.com/package/metalsmith)
    批量处理模板场景
  - 7 [handlebars](https://www.npmjs.com/package/handlebars)
    模板引擎工具,可用于修改package.json中配置
  - 8 [log-symbols](https://www.npmjs.com/package/log-symbols)
    在打印输入中添加icon,交互更加友好
  - 9 [rimraf]
    在`Node`环境中,使用`rm -rf`对文件进行删除操作

## 脚手架目录结构
  ```shell
  |__ bin
    |__ my-cli.js  # 命令脚本
  |__ src
    |__ create.js  # 初始化命令
    |__ list.js  # 列出模板
  |__ node_modules
  |__ package.json
  |__ templates.json  # 模板列表
  ```

# 搭建
  可以从npmjs中下载一个脚手架,查看里面的目录及配置信息
