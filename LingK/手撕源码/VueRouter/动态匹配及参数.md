# 带参数的动态路由匹配

## 捕获所有路由或者404 Not Found路由

常规的参数只能匹配url片段之间的字符,使用`/`分隔.
如果想匹配任意路径,可以通过正则表达式进行匹配.

```js 正则匹配url
const routes = [
  // 将匹配所有内容并将其放在 `$route.params.pathMatch` 下
  { path: '/:pathMatch(.*)*', name: 'NotFound', component: NotFound },
  // 将匹配以 `/user-` 开头的所有内容，并将其放在 `$route.params.afterUser` 下
  { path: '/user-:afterUser(.*)', component: UserGeneric },
]
```
```js 404 Not Found
this.$router.push({
  name: 'NotFound',
  // 保留当前路径并删除第一个字符，以避免目标 URL 以 `//` 开头。
  params: { pathMatch: this.$route.path.substring(1).split('/') },
  // 保留现有的查询和 hash 值，如果有的话
  query: this.$route.query,
  hash: this.$route.hash,
})
```

# 路由的匹配语法

## 在参数中定义正则

定义`:userID`这样的参数时,内部应使用正则`([^/]+)`至少有一个字符不是斜杠.在URL取满足条件的值.
如果此时有两个相似路由 `/:orderID`和`/:productName`, 他们会使用到一样的正则
*第一种方法* 在路径中添加一个静态部分进行区分
```js 通过字符区分url
const routes = [
  // 匹配 /o/3549
  { path: '/o/:orderId' },
  // 匹配 /p/books
  { path: '/p/:productName' },
]
```
*第二种方式* 通过给参数添加正则
```js 补正则
const routes = [
  // /:orderId -> 仅匹配数字
  { path: '/:orderId(\\d+)' },
  // /:productName -> 匹配其他任何内容
  { path: '/:productName' },
]
// 数组的顺序并不重要, 正则会优先进行匹配
```
**确保转义反斜杠( \ )，就像我们对 \d (变成\\d)所做的那样，在 JavaScript 中实际传递字符串中的反斜杠字符。**

## 可重复的参数

如果需要匹配具有多个部分的路由, `/first/second/third`, 此时应该使用 `*` (n个)来进行筛选, 将它标记为可重复的.
```js 正则重复项
const routes = [
  // /:chapters ->  匹配 /one, /one/two, /one/two/three, 等
  { path: '/:chapters+' },
  // /:chapters -> 匹配 /, /one, /one/two, /one/two/three, 等
  { path: '/:chapters*' },
]
```
```js 使用router.resolve解析标准地址
// 给定 { path: '/:chapters*', name: 'chapters' },
router.resolve({ name: 'chapters', params: { chapters: [] } }).href
// 产生 /
router.resolve({ name: 'chapters', params: { chapters: ['a', 'b'] } }).href
// 产生 /a/b
// 给定 { path: '/:chapters+', name: 'chapters' },
router.resolve({ name: 'chapters', params: { chapters: [] } }).href
// 抛出错误，因为 `chapters` 为空
```
```js 结合正则匹配重复项目
const routes = [
  // 仅匹配数字
  // 匹配 /1, /1/2, 等
  { path: '/:chapters(\\d+)+' },
  // 匹配 /, /1, /1/2, 等
  { path: '/:chapters(\\d+)*' },
]
```

## Sensitive 和 strict 路由配置
限制*大小写*,和结尾的 */*;
```js
const router = createRouter({
  history: createWebHistory(),
  routes: [
    // 将匹配 /users/posva 而非：
    // - /users/posva/ 当 strict: true
    // - /Users/posva 当 sensitive: true
    { path: '/users/:id', sensitive: true },
    // 将匹配 /users, /Users, 以及 /users/42 而非 /users/ 或 /users/42/
    { path: '/users/:id?' },
  ]
  strict: true, // applies to all routes
})
```

## 可选参数
和`*`不同,`?`可以表示0个或1个,`*`表示0个或多个
```js
const routes = [
  // 匹配 /users 和 /users/posva
  { path: '/users/:userId?' },
  // 匹配 /users 和 /users/42
  { path: '/users/:userId(\\d+)?' },
]
```

