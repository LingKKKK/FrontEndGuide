# 重定向和别名

## 重定向

重定向也是在路由表中定义的

```js
const routes = [{ path: "/home", redirect: "/" }];
// 也可以重定向到已经存在的路由
const routes = [{ path: "/home", redirect: { name: "homepage" } }];
// 动态返回重定向的目标
const routes = [
  {
    // /search/screens -> /search?q=screens
    path: "/search/:searchText",
    redirect: (to) => {
      // 方法接收目标路由作为参数
      // return 重定向的字符串路径/路径对象
      return { path: "/search", query: { q: to.params.searchText } };
    },
  },
  {
    path: "/search",
    // ...
  },
];
```

**注意**导航守卫不会进入到重定向的逻辑内部,只会作用到目标上.
守卫最后处理的是一个完整的路由表,不会关心里面的逻辑.

### 相对重定向

```js
const routes = [
  {
    // 将总是把/users/123/posts重定向到/users/123/profile。
    path: "/users/:id/posts",
    redirect: (to) => {
      // 该函数接收目标路由作为参数
      // 相对位置不以`/`开头
      // 或 { path: 'profile'}
      return "profile";
    },
  },
];
```

## 别名

_重定向_ 是指当用户访问 /home 时，URL 会被 / 替换，然后匹配成 /
_别名_ 是将 / 别名为 /home，意味着当用户访问 /home 时，URL 仍然是 /home，但会被匹配为用户正在访问 /。
区别就在于 url 的状态,以及 router 的变更情况.

```js
const routes = [{ path: "/", component: Homepage, alias: "/home" }];
```

**别名的使用** 可以展示 n 个路由

```js
const routes = [
  {
    path: "/users",
    component: UsersLayout,
    children: [
      // 为这 3 个 URL 呈现 UserList
      // - /users
      // - /users/list
      // - /people
      { path: "", component: UserList, alias: ["/people", "list"] },
    ],
  },
];
```

# 组件传参

通过设置 props 属性, 进行传参

_命名视图_

```js
const routes = [
  {
    path: "/user/:id",
    components: { default: User, sidebar: Sidebar },
    props: { default: true, sidebar: false },
  },
];
```

_对象模式_

```js
const routes = [
  {
    path: '/promotion/from-newsletter',
    component: Promotion,
    props: { newsletterPopup: false }
  }
]
```

_函数模式_

```js
const routes = [
  {
    path: '/search',
    component: SearchUser,
    props: route => ({ query: route.query.q })
  }
]
```
