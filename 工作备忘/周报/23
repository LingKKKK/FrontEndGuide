【周报】岳鹏飞 2022/5/14

<fe@lenovocloud.com>;
xuyb@lenovocloud.com;<wangzy@lenovocloud.com>;<yuanlei@lenovocloud.com>;

本周工作内容
  1.合并2021_patch9代码
  2.大巴三期三轮提测
  3.完成大巴三期复盘
  4.信创改动范围梳理
  5.信创打包标识调研
  6.整理信创cherry-pick流程
  7.排查定位线上遗留问题

下周工作安排
  1.排查定位线上遗留问题
  2.合并2021_patch10代码
  3.演示信创cherry-pick操作流程
  4.js2native插件review
  5.对大巴三期出现的知识点进行总结

思考体会
  分享一种可以快速定位bug的方法: 二分注释法.
  二分查找法是比较高效的查询算法,二分注释法借鉴了这个思想,每次注释一半代码进行调试,以此类推,直到查找到bug.
  举例: 在上周大巴三期二轮测试阶段,测试报了一个线上bug: https://jira.lenovows.com/browse/PCSONLINE-2788,在特殊的条件下会引发这样一个问题, url连续跳转两次,导致路由拼写错误,从而引发页面空白的问题.
  分析: 如果比较熟悉router和vue渲染机制,可能就会思考导致此类问题的原因: 是否SSR渲染问题,也可以定位一下'url中引起渲染错误的参数'和'修改路由的一些api(push、replace、go、forward等等)',以及window提供的api(replaceState、pushState、popState)<基于history>,确定了上述的排查范围,很容易就能定位出错误,然后加日志进行验证即可. 如果不熟悉这些api,不熟悉项目怎么办? 如果逐行梳理代码逻辑,添加日志排错,这样的效率极低,而且排查方向很容易出错; 这种情况使用二分注释法再合适不过,需要做:1.先梳理出主流程 2.基于这个线性流程进行二分注释 3.问题缩小之后使用日志排错. 这样就跳过了逻辑梳理的过程,极大的提升了效率.

其他周知事项
  无


# 计划

1. 大巴三期合并2021_patch9代码
2. 更新原子权限构造器的引用(v1.0.2), 合入大巴三期
3. 确定信创版本修改范围: 信创主题/下载管控/数据库适配/php升级
4. 定位线上遗留问题
5. 完成大巴三期_sprint3代码合并及打包


<!--
  1. 从v2021-patch9 签出新分支
    涉及项目: view/web/doc_preview/dcz
  2. 对齐功能
    信创主题 - 卢玉芬
    下载管控 - 赵黎明
    适配国产数据库 - 陈阳
    php升级 - 陈阳配合服务端
    js2native
    其他零碎的功能点 - 郭宏博

  原则:
    1. 支持v2021 merge into zhuque_2021
    2. 支持patch (涉及项目: view/web/doc_preview/dcz)


  6.3前后提测 三周半的时间

  不包含linux
  在编译的时候通过打包命令更改打包方向

  确定范围 -
-->
