
# 命名
Della

# 初衷
打造一款敏捷的知识库协同工具，为团队提供强大的文档编辑能力，站点管理能力，能够帮助团队成员之前共享信息、丰富团队知识库。
和Filez对office的处理能力不冲突，服务的类型不同，可以做到互补。

# 能力对比
  因为Filez网盘同样具有知识库的功能，所以将Della和Filez（文本文档）做一个横向的对比：
  1. 文档组织能力
    Filez: 文档组织能力比较弱，没有提供文档组织的功能，只能提供文档的编辑功能。
    Della: 提供文档组织的功能，一次性的完成目录结构和页面创建，目录结构更加清晰，切换更加便捷。
  2. 文档模板能力
    Filez: 空白文档，创建完毕自行编辑
    Della: 可定制、可共享、可复用
  3. 富媒体编辑能力
    Filez: 文档编辑能力
    Della: 文档编辑能力、富媒体编辑支持、各种丰富的插件
  4. 团队协作能力
    Filez: 编辑好文档之后，需要通知一下团队
    Della: 可以 @某人，可以看到通知快速定位文档地址
  和比较成熟的知识库Confluence做对比：
  1. 成熟度
    Confluence: 较为成熟，插件能力较丰富
    Della: 插件较少，仅满足团队管理需求，可慢慢扩充
  2. 页面权限配置问题
    Confluence: 每增加一个人，都要手动添加、配置几十上百个页面的权限
    Della: 添加用户组，和文件等级，完全自动配置读写权限
  3. 费用
    Confluence: 费用比较高.
      国内其他商用知识库，费用相对较低，但是管理和编辑展示能力较弱，和confluence的能力差的不是一星半点。
      阿里的语雀实现效果比较好，功能和confluence差不多，费用相对较低。

# Della插件及能力枚举
  1.登录模块 -> ITcode | 网盘账号
  2.RBAC
  3.侧边栏管理 -> md5&base64&动态
  4.主内容区
    收藏功能
    分享功能
    通知功能 -> @用户 ws://
    其他操作 -> 查看附件/查看历史/查看权限(默认开放,具有操作能力)/空间管理(拖拽,导出等)
    页面展示模块 -> 提供展示和编辑两种状态

# 架构分析

## 前端
  一 暂不考虑兼容性
  二 框架选择： React 全家桶 vs Vue2/3 全家桶

  展示的内容可以以组件的形式展示在页面中
    以下插件都是基于React来实现的：
      markdown: https://www.npmjs.com/package/react-markdown
      table: https://www.npmjs.com/package/react-table
      流程图: https://www.npmjs.com/package/ysp-gg-editor
      日程管理： https://www.npmjs.com/package/katoto-big-calendar
    还有一些可以自定义的组件:
      @某人
      自定义label标签的颜色和文字
      目录结构展示（仅展示，不做编辑处理）

  要考虑每个组件的模型，组件之间如何通信，数据如何进行保存

### 移动
  和PC使用不同的架构。
  等Web开发完毕，可以考虑使用 Uni-app，FLutter，RN 一件生成多端应用

## 服务端
  ws://
  nodejs(exporess/koa2/egg) + sequelize + redis + Mysql/MengoDB

  文档以hash_id为唯一标识，让目录结构松耦合，单纯靠id和id之间的关系连接，这样文件的创建、迁移、删除更简单，更容易维护。
  需要考虑:
    成员管理中心
    权限管理中心
    数据库的设计
    订阅，@，发布 等消息队列

  比较重要的地方是，如何设计数据模型，最好能完全兼容 confluence 的数据模型, 支持从confluence迁移
  支持一键导入导出：文档、数据、用户、组织信息。


# 前端技术细节分析
  使用JQ也是比较容易实现的，单纯的操作DOM即可。

  1. 考虑到页面的性能：
    react、vue、(angular放弃，因为不够主流) 都使用vdom，della知识库涉及到的dom操作是比较频繁的，使用vdom会是页面渲染更流畅。 当然这是比较极端的场景，普通的场景使用不了太多的dom，而且没有动画和复杂交互场景
  2. 考虑升级成本:
    react每个版本的升级和迁移成本都非常低，新版都是完全兼容旧版本的，这意味着新旧版本的代码可以同时运行。这方面我觉得react做的十分优秀的，这也是一直喜欢、推崇react的原因
  3. 考虑到社区的发展:
    react和vue差不多
  4. ...




1.错误日志收集
2.国际化文案管理系统
3.知识库管理系统

UI和交互完全参照confluence的设计即可。
因为React自由度比较高，而且可以做到无缝升级的，所以可以不使用现成的框架，而是自己从0搭建一套。
所以从 react react-dom react-router react-redux 开始逐步丰富内容

是否要使用typeScript？
  create-react-app demo --template typescript

每日计划:
  6.24 ~ 26
    确定react版本
    搭建侧边和顶部栏目；使用mock出来的数据做填充，展示侧边栏和用户头像等基本信息
    搭建设置按钮，实现主题切换等功能，可以参照 AntDesignPro 的实现
    切换时添加动画效果，淡入淡出
  6.27
  6.28
  6.29
  6.30
  7.01
